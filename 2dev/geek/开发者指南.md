# På·¥å…·ç®± (GeekezBrowser) å¼€å‘è€…æŒ‡å—

æœ¬æ–‡æ¡£é¢å‘å¼€å‘/ç»´æŠ¤ `På·¥å…·ç®±` çš„åŒå­¦ï¼Œè¯´æ˜å½“å‰ Geek ç‰ˆï¼ˆåŸºäº GeekezBrowserï¼‰çš„æ¶æ„ã€ä¾èµ–ã€å¯å¤ç”¨æ¨¡å—ï¼Œä»¥åŠå¦‚ä½•æ–°å¢ä¸€ä¸ªâ€œä¸“åŒºâ€ï¼ˆä¾‹å¦‚ GB ä¸“åŒº / GPT ä¸“åŒºï¼‰ã€‚

ç›®æ ‡ï¼š
- ç°åœ¨ä»¥â€œå…ˆå †åŠŸèƒ½â€ä¸ºä¸»ï¼šæ–°ä»»åŠ¡ä¼˜å…ˆåŠ åœ¨ `2dev/geek/geek_process.py`ï¼›GUI åªåšæŒ‰é’® + `task_type` åˆ†å‘ã€‚
- åŒæ—¶æŠŠè¾¹ç•Œå’Œå¤ç”¨ç‚¹è®°å½•æ¸…æ¥šï¼Œåç»­æ‹†åˆ†/æ‰©å±•æˆæœ¬ä½ã€‚

ç›¸å…³è§„åˆ’æ–‡æ¡£ï¼š`På·¥å…·ç®±_æ‹†åˆ†è§„åˆ’.md`

---

## 1. å¿«é€Ÿå…¥å£

### 1.1 å½“å‰ä¸» GUIï¼ˆPå·¥å…·ç®±ï¼‰

- å…¥å£ï¼š`2dev/geek/geek_main_gui.py`
- å¯åŠ¨ï¼š

```bash
python 2dev/geek/geek_main_gui.py
```

### 1.2 æ—§ Geek GUIï¼ˆè¾ƒç®€ç‰ˆï¼‰

- å…¥å£ï¼š`2dev/geek/geek_gui.py`
- å®ƒä¹Ÿä¼šè¢«ä¸» GUIï¼ˆè€ BitBrowser GUIï¼‰é€šè¿‡æŒ‰é’®æ‰“å¼€ï¼š`create_window_gui.py` çš„ `action_open_geek_gui()`

---

## 2. è¿è¡Œæ—¶æ¶æ„ï¼ˆè°ƒç”¨é“¾ï¼‰

æ–‡å­—ç‰ˆæ¶æ„å›¾ï¼š

```text
GUI: 2dev/geek/geek_main_gui.py
  â””â”€ GeekWorkerThread (åå°çº¿ç¨‹ + å¹¶å‘ + æ—¥å¿—æ•è·)
      â””â”€ GeekProcess: 2dev/geek/geek_process.py (æµç¨‹ç¼–æ’)
          â”œâ”€ GeekezBrowserAPI: 2dev/geek/geek_browser_api.py
          â”‚   â”œâ”€ æ§åˆ¶ç«¯å£ HTTP: /health /profiles/{id}/launch /profiles/{id}/close /shutdown
          â”‚   â””â”€ æœ¬åœ° profile æ–‡ä»¶: profiles.json / settings.json
          â””â”€ å¤ç”¨åŸä»“åº“ä¸šåŠ¡æ¨¡å—ï¼ˆPlaywright é¡µé¢é€»è¾‘/çŠ¶æ€è½åº“/å¯¼å‡ºï¼‰
              â”œâ”€ auto_bind_card.py
              â”œâ”€ account_manager.py
              â”œâ”€ database.py
              â”œâ”€ sheerid_verifier.py
              â””â”€ sheerid_gui.py
```

æ ¸å¿ƒçº¦å®šï¼š
- â€œç¯å¢ƒ/æµè§ˆå™¨ Profileâ€çš„ç¨³å®š key ä½¿ç”¨ `email`ï¼šprofile name = emailã€‚
- `GeekProcess.ensure_profiles()` è´Ÿè´£æŠŠ `accounts.txt` æ˜ å°„æˆ GeekezBrowser profilesã€‚

---

## 3. GeekezBrowser ä¾§çº¦å®š

### 3.1 æ§åˆ¶ç«¯å£

é»˜è®¤åœ¨ `2dev/geek/geek_main_gui.py`ï¼š
- `CONTROL_HOST = 127.0.0.1`
- `CONTROL_PORT = 19527`

æ§åˆ¶ç«¯å£ç”± GeekezBrowserï¼ˆå¤–éƒ¨ä»“åº“ï¼‰åœ¨å¯åŠ¨å‚æ•° `--control-port=19527` æ—¶æä¾›ã€‚

### 3.2 profiles/settings æ–‡ä»¶ä½ç½®

åœ¨ `2dev/geek/geek_browser_api.py` çš„ `_default_data_dir()`ï¼š
- Windowsï¼š`%APPDATA%\geekez-browser\BrowserProfiles`
- é Windows fallbackï¼š`~/.config/geekez-browser/BrowserProfiles`

æ–‡ä»¶ï¼š
- `profiles.json`ï¼šprofile åˆ—è¡¨ï¼ˆæœ¬é¡¹ç›®ä¼šåœ¨æ­¤ upsert profileï¼‰
- `settings.json`ï¼šä¼šå†™å…¥ `enableRemoteDebugging=true`ï¼ˆç”¨äº Playwright CDP è¿æ¥ï¼‰

---

## 4. På·¥å…·ç®± GUI çš„ä»»åŠ¡å…¥å£ä¸ task_type

æ–‡ä»¶ï¼š`2dev/geek/geek_main_gui.py`

### 4.1 é¡¶éƒ¨å¼•æ“å¼€å…³

- `toggle_engine(checked=True)` â†’ `start_task("start_app")`
  - è°ƒç”¨ `AppLauncher.start()`ï¼ˆå†…éƒ¨é€šè¿‡ `npm start -- --control-port=...` å¯åŠ¨ GeekezBrowserï¼‰
- `toggle_engine(checked=False)` â†’ `AppLauncher.stop()`
  - ä¼˜å…ˆèµ° `POST /shutdown` ä¼˜é›…é€€å‡ºï¼Œå† best-effort terminate è¿›ç¨‹ï¼Œå¹¶ç­‰å¾… `/health` ä¸‹çº¿

### 4.2 å·¥å…·ç®±ï¼šGoogle ä¸“åŒº

- `SheerLink è·å–` â†’ `start_task("sheerlink")`
  - `GeekProcess.run_sheerlink()`
- `ä»…ç»‘å¡ (æ— API)` â†’ `start_task("bind")`
  - ä»£ç å¤ç”¨çš„æ˜¯ `GeekProcess.run_auto()`ï¼Œä½†ä¼šä¼  `api_key=""`ï¼ˆå³åªåšï¼šç™»å½•/æ£€æµ‹/è‹¥å·² verified åˆ™ç»‘å¡ï¼›è‹¥ link_ready åˆ™ä»…ä¿å­˜é“¾æ¥ï¼‰
- `å…¨è‡ªåŠ¨ (éªŒè¯+ç»‘å¡)` â†’ `start_task("auto")`
  - `GeekProcess.run_auto()`ï¼ˆå¦‚æœæä¾› API Key åˆ™èµ° verify_singleï¼‰
- `SheerID æ‰¹é‡éªŒè¯` â†’ `action_open_sheerid_window()`
  - ç›´æ¥æ‰“å¼€ `sheerid_gui.SheerIDWindow`ï¼ˆè¯»å– `sheerIDlink.txt` è¿›è¡Œæ‰¹é‡éªŒè¯ï¼‰
- `ğŸ” å®‰å…¨è®¾ç½®ä¿®æ”¹` â†’ `action_open_security_window()`
  - æ‰“å¼€ `geek_security_gui.GeekSecurityWindow`
  - åŠŸèƒ½ï¼šä¿®æ”¹ 2FA å¯†é’¥ / ä¿®æ”¹è¾…åŠ©é‚®ç®± / è·å–å¤‡ä»½éªŒè¯ç  / ä¸€é”®ä¿®æ”¹å…¨éƒ¨
  - è¾“å‡ºæ–‡ä»¶ï¼š`2dev/new_2fa_secrets.txt`ã€`2dev/backup_codes.txt`
- `ğŸ“‹ éªŒè¯è®¢é˜…çŠ¶æ€` â†’ `start_task("verify_subscription")`
  - `GeekProcess.verify_subscription_status()`
  - æ£€æµ‹è´¦å·è®¢é˜…çŠ¶æ€ï¼ˆsubscribed/verified/link_ready/ineligibleï¼‰å¹¶æˆªå›¾
  - è¾“å‡ºï¼š`screenshots/` ç›®å½•ä¸‹æŒ‰é‚®ç®±å‘½åçš„æˆªå›¾
- `ğŸ”˜ ç‚¹å‡»è®¢é˜…æŒ‰é’®` â†’ `start_task("click_subscribe")`
  - `GeekProcess.click_subscribe_button()`
  - è‡ªåŠ¨ç‚¹å‡» Subscribe æŒ‰é’®å¹¶å¤„ç†ç¡®è®¤å¯¹è¯æ¡†

### 4.3 å·¥å…·ç®±ï¼šæ•°æ®ç®¡ç†

- `ç¯å¢ƒåˆ›å»º/æ›´æ–°` â†’ `start_task("ensure_profiles")`
  - `GeekProcess.ensure_profiles()`
- `è´¦å·ç¼–è¾‘/ä»£ç†ç¼–è¾‘/å¡å·ç¼–è¾‘`
  - `DataEditorDialog` ç›´æ¥ç¼–è¾‘æ ¹ç›®å½•çš„ï¼š`accounts.txt` / `proxies.txt` / `cards.txt`

### 4.4 è¡¨æ ¼åŒºåŸŸ

- è¡Œå†…æŒ‰é’® `â–¶ï¸/â¹ï¸`ï¼šåˆ†åˆ« `start_task("launch", [email])`ã€`start_task("close", [email])`
- æ‰¹é‡æŒ‰é’® `â–¶ï¸ æ‰¹é‡å¯åŠ¨/â¹ï¸ æ‰¹é‡å…³é—­`ï¼šåˆ†åˆ« `start_task("launch")`ã€`start_task("close")`

---

## 5. GeekProcess ä¸åŸä»“åº“æ¨¡å—ä¾èµ–ï¼ˆå…³é”®ç‚¹ï¼‰

æ–‡ä»¶ï¼š`2dev/geek/geek_process.py`

### 5.1 å¤ç”¨çš„åŸä»“åº“èƒ½åŠ›ï¼ˆç›´æ¥ importï¼‰

- `auto_bind_card.py`
  - `check_and_login(page, account_info)`ï¼šç”¨äºç™»å½•
  - `auto_bind_card(page, card, account_info)`ï¼šç”¨äºç»‘å¡/è®¢é˜…

- `account_manager.py`
  - `AccountManager.save_link(line)`ï¼šå†™ `sheerIDlink.txt`
  - `AccountManager.move_to_verified(line)`ï¼šå†™ `å·²éªŒè¯æœªç»‘å¡.txt`
  - `AccountManager.move_to_ineligible(line)`ï¼šå†™ `æ— èµ„æ ¼å·.txt`
  - `AccountManager.move_to_subscribed(line)`ï¼šå†™ `å·²ç»‘å¡å·.txt`
  - `AccountManager.move_to_error(line)`ï¼šå†™ `è¶…æ—¶æˆ–å…¶ä»–é”™è¯¯.txt`

- `database.py`
  - `DBManager.update_status(email, status, message=...)`ï¼šæ›´æ–° SQLite ä½œä¸ºå•ä¸€æ•°æ®æº

- `sheerid_verifier.py`
  - `SheerIDVerifier.verify_single(link)`ï¼šå•ä¸ªé“¾æ¥éªŒè¯ï¼ˆ`run_auto()` ä¸­ä½¿ç”¨ï¼‰
  - `SheerIDVerifier.verify_batch(...)`ï¼šæ‰¹é‡éªŒè¯ï¼ˆä¸»è¦åœ¨ `sheerid_gui.py` ä¸­ä½¿ç”¨ï¼‰

- `sheerid_gui.py`
  - `SheerIDWindow`ï¼šç°æˆçš„æ‰¹é‡éªŒè¯çª—å£

- `2dev/geek/geek_security.py`
  - `GeekSecurityAutomation`ï¼šå®‰å…¨è®¾ç½®è‡ªåŠ¨åŒ–ï¼ˆä¿®æ”¹2FA/è¾…åŠ©é‚®ç®±/å¤‡ä»½ç ï¼‰

- `2dev/geek/geek_security_gui.py`
  - `GeekSecurityWindow`ï¼šå®‰å…¨è®¾ç½® GUI çª—å£

### 5.2 GeekProcess è‡ªå·±åšçš„äº‹ï¼ˆé€‚é…å±‚ï¼‰

- è§£ææ•°æ®æ–‡ä»¶ï¼š
  - `load_accounts()`ï¼šè¯»å–æ ¹ç›®å½• `accounts.txt`ï¼ˆæ”¯æŒç¬¬ä¸€è¡Œ `åˆ†éš”ç¬¦=`ï¼‰
  - `load_proxies()`ï¼šè¯»å– `proxies.txt`ï¼ˆæ”¯æŒ `http://` / `socks5://` / `host:port`ï¼‰
  - `load_cards()`ï¼šè¯»å– `cards.txt`ï¼ˆç©ºæ ¼åˆ†éš”ï¼šnumber exp_month exp_year cvvï¼‰

- Geek ç¯å¢ƒæ˜ å°„ï¼š
  - `ensure_profile()` / `ensure_profiles()`ï¼šprofile name = emailï¼Œmetadata.remark ä¿å­˜è´¦å·è¡Œä¿¡æ¯
  - `launch_by_email()` / `close_by_email()`ï¼šé€šè¿‡ `GeekezBrowserAPI` è°ƒèµ·æ§åˆ¶ç«¯å£

- Playwright è¿æ¥ï¼š
  - `_connect_page(cdp_endpoint)`ï¼š`playwright.chromium.connect_over_cdp()`
  - é€šè¿‡ `LaunchInfo.cdp_endpoint`ï¼ˆé€šå¸¸æ˜¯ `http://127.0.0.1:{debugPort}`ï¼‰è¿æ¥

- è®¢é˜…éªŒè¯ï¼š
  - `verify_subscription_status(account, ...)`ï¼šæ£€æµ‹è®¢é˜…çŠ¶æ€ + æˆªå›¾
  - `click_subscribe_button(account, ...)`ï¼šç‚¹å‡»è®¢é˜…æŒ‰é’®
  - `check_confirmation_dialog(account, ...)`ï¼šå¤„ç†ç¡®è®¤å¯¹è¯æ¡†
  - `verify_result(account, ...)`ï¼šéªŒè¯ç»“æœ + æˆªå›¾

### 5.3 å®‰å…¨è®¾ç½®æ¨¡å—ï¼ˆGeek ç‰ˆï¼‰

æ–‡ä»¶ï¼š`2dev/geek/geek_security.py` + `2dev/geek/geek_security_gui.py`

- `GeekSecurityAutomation` ç±»ï¼š
  - `change_2fa_secret(email, account_info, ...)`ï¼šä¿®æ”¹ 2FA å¯†é’¥
  - `change_recovery_email(email, account_info, new_email, ...)`ï¼šä¿®æ”¹è¾…åŠ©é‚®ç®±
  - `get_backup_codes(email, account_info, ...)`ï¼šè·å–å¤‡ä»½éªŒè¯ç 
  - `one_click_security_update(email, account_info, ...)`ï¼šä¸€é”®ä¿®æ”¹å…¨éƒ¨

- `GeekSecurityWindow`ï¼šå®‰å…¨è®¾ç½® GUI çª—å£
  - æ“ä½œæ¨¡å¼ä¸‹æ‹‰é€‰æ‹©
  - è´¦å·åˆ—è¡¨è¡¨æ ¼
  - è¾…åŠ©é‚®ç®±ç¼–è¾‘åŒº
  - è¿è¡Œæ—¥å¿—æ˜¾ç¤º

---

## 6. å¯å¤ç”¨æ¨¡å—æ¸…å•ï¼ˆæŒ‰å¤ç”¨æˆæœ¬åˆ†ç±»ï¼‰

è¿™ä¸€èŠ‚ç”¨äºå›ç­”ï¼šâ€œä»¥ååŠ æ–°ä¸“åŒºï¼ˆä¾‹å¦‚ GB ä¸“åŒºï¼‰æ—¶ï¼Œå“ªäº›ä¸œè¥¿å¯ä»¥ç›´æ¥å¤ç”¨ï¼Ÿâ€

### 6.1 å¯ç›´æ¥å¤ç”¨ï¼ˆå»ºè®®ä¼˜å…ˆå¤ç”¨ï¼‰

- `2dev/geek/geek_browser_api.py`
  - `GeekezBrowserAPI`ï¼šæ§åˆ¶ç«¯å£ + profiles/settings æ–‡ä»¶è¯»å†™
  - `LaunchInfo`ï¼šç»Ÿä¸€æ‰¿è½½ debugPort/cdpEndpoint

- `2dev/geek/geek_process.py`
  - `load_accounts/load_proxies/load_cards`
  - `proxy_to_url()`
  - `ensure_profiles()/launch_by_email()/close_by_email()`
  - `_connect_page()`ï¼šç»Ÿä¸€ Playwright CDP æ¥å…¥

- `account_manager.py`
  - è´¦å·çŠ¶æ€è¾“å‡ºæ–‡ä»¶çš„â€œè½ç›˜è§„èŒƒâ€å·²ç»ç¨³å®šï¼ˆæœ‰èµ„æ ¼/å·²éªŒè¯/å·²ç»‘å¡/æ— èµ„æ ¼/é”™è¯¯ç­‰ï¼‰

- `database.py`
  - `DBManager.update_status()` ç­‰çŠ¶æ€ç»´æŠ¤æ¥å£ï¼ˆæŠŠ SQLite å½“å•ä¸€æ•°æ®æºï¼‰

- `sheerid_verifier.py`
  - `SheerIDVerifier.verify_single()` é€‚åˆç”¨äºâ€œå•è´¦å·è‡ªåŠ¨æµç¨‹â€

### 6.2 éœ€è¦è–„å°è£…åå¤ç”¨ï¼ˆå»ºè®®ï¼šä¸“åŒºå†…å°è£…è°ƒç”¨ï¼‰

- `auto_bind_card.py`
  - é¡µé¢æ“ä½œåâ€œGoogle One AI Student ä¸šåŠ¡ä¸“ç”¨â€ã€‚
  - ä½†å®ƒå·²ç»æ²‰æ·€äº†å¤§é‡ iframe/æ”¯ä»˜è¡¨å•å…¼å®¹é€»è¾‘ã€‚
  - è‹¥æ–°ä¸“åŒºçš„ä»˜æ¬¾/æ”¯ä»˜æµç¨‹ç›¸ä¼¼ï¼ˆåŒå± Google Paymentsï¼‰ï¼Œå¯ä»¥è–„å°è£…å¤ç”¨ï¼›å¦åˆ™ä¸å»ºè®®ç¡¬å¥—ã€‚

- `2dev/email_verifier.py`
  - `EmailVerifier` æ˜¯ IMAP è¯»å–éªŒè¯ç çš„é€šç”¨ç»„ä»¶ã€‚
  - ä½†å®ƒå½“å‰çš„â€œç­›é€‰è§„åˆ™â€å Google é‚®ä»¶ï¼ˆå‘ä»¶äºº/ä¸»é¢˜å…³é”®å­—ï¼‰ï¼Œæ–°ä¸“åŒºå¯èƒ½éœ€è¦æ‰©å±• `_is_google_verification_email()`ã€‚

- `2dev/geek/geek_main_gui.py`
  - `GeekWorkerThread` çš„ stdout/stderr æ•è·å¯¹â€œå¤ç”¨æ—§æ¨¡å—å¤§é‡ print() è¾“å‡ºâ€å¾ˆæœ‰ä»·å€¼ã€‚
  - å¦‚æœæ–°ä¸“åŒºä¹Ÿä¼šå¤ç”¨æ—§è„šæœ¬ï¼Œå»ºè®®æ²¿ç”¨æ­¤æ—¥å¿—æ•è·æ–¹å¼ã€‚

### 6.3 ä¸å»ºè®®å¤ç”¨ï¼ˆä»…å½“ä½œå‚è€ƒ/æ ·ä¾‹ï¼‰

- `2dev/geek/geek_template.py`
  - æ›´åƒ demoï¼šå±•ç¤º Drission/Playwright/CDP ä¸‰ç§è¿æ¥æ–¹å¼ï¼Œé€‚åˆå‚è€ƒï¼Œä¸è¦ç›´æ¥ä¾èµ–ã€‚

- `2dev/geek/auto-goo-login.py`
  - æ˜¯å†å²è„šæœ¬ï¼šåäººå·¥äº¤äº’/æš‚åœè¾“å…¥ï¼Œä¸ç¬¦åˆå½“å‰ GUI å¹¶å‘æ¨¡å‹ã€‚

---

## 7. æ–°å¢ä¸€ä¸ªä¸“åŒºï¼ˆGB/GPTï¼‰æ¨èåšæ³•

åŸåˆ™ï¼š
- æ–°ä¸“åŒºçš„ä¸šåŠ¡é€»è¾‘æ”¾åœ¨â€œæµç¨‹å±‚â€ï¼ˆä¼˜å…ˆ `2dev/geek/geek_process.py`ï¼Œæˆ–åœ¨ `2dev/<zone>/` æ–°å»ºæ¨¡å—ç„¶åç”± `GeekProcess` è°ƒç”¨ï¼‰ã€‚
- GUI åªæ–°å¢æŒ‰é’® + `task_type`ï¼›ä¸è¦åœ¨ GUI é‡Œå†™ Playwright å…·ä½“é¡µé¢é€»è¾‘ã€‚

ä¸‹é¢ç»™ä¸€ä¸ªæœ€å°æ¨¡æ¿ï¼ˆæ¨èæ²¿ç”¨ç°æœ‰æ¨¡å¼ï¼‰ã€‚

### 7.1 åœ¨æµç¨‹å±‚æ–°å¢ä¸€ä¸ªå…¥å£æ–¹æ³•

å»ºè®®ï¼šåœ¨ `2dev/geek/geek_process.py` å¢åŠ  `run_gb_xxx()`ï¼ˆå‘½åæŒ‰ä¸“åŒºå‰ç¼€åŒºåˆ†ï¼‰ã€‚

```python
# ä¼ªä»£ç ç¤ºä¾‹ï¼šæ”¾åœ¨ 2dev/geek/geek_process.py

def run_gb_xxx(
    self,
    account: Dict[str, Any],
    proxy_str: Optional[str] = None,
    log_callback: Optional[Callable[[str], None]] = None,
) -> Tuple[bool, str]:
    email = (account.get("email") or "").strip()
    if not email:
        return False, "missing email"

    self.ensure_profile(account, proxy_str=proxy_str)
    launch = self.launch_by_email(email)

    async def _runner() -> Tuple[bool, str]:
        playwright = None
        try:
            playwright, browser, page = await self._connect_page(launch.cdp_endpoint)
            # 1) page.goto(...) è¿›å…¥ä¸“åŒºç›®æ ‡é¡µé¢
            # 2) å¤ç”¨/è°ƒç”¨è¯¥ä¸“åŒºçš„è‡ªåŠ¨åŒ–é€»è¾‘
            # 3) æ›´æ–° AccountManager / DBManager çŠ¶æ€
            return True, "ok"
        finally:
            if playwright:
                try:
                    await playwright.stop()
                except Exception:
                    pass

    try:
        ok, msg = asyncio.run(_runner())
        return ok, msg
    finally:
        self.close_by_profile_id(launch.profile_id)
```

è½åº“/è½ç›˜å»ºè®®ï¼š
- åªè¦æœ‰â€œå¯è§£é‡Šçš„çŠ¶æ€â€ï¼Œå°±ç”¨ `DBManager.update_status()` å†™å…¥æ•°æ®åº“ã€‚
- åŒæ—¶ä½¿ç”¨ `AccountManager.move_to_xxx()` ç»´æŒç°æœ‰çš„ txt è¾“å‡ºè§„èŒƒï¼ˆä¾¿äºäººå·¥æŸ¥çœ‹å’Œä¸æ—§é“¾è·¯å…¼å®¹ï¼‰ã€‚

### 7.2 åœ¨ GUI å·¦ä¾§å·¥å…·ç®±æ–°å¢ä¸“åŒºå…¥å£

åœ¨ `2dev/geek/geek_main_gui.py`ï¼š
- ä»¿ç…§ `_add_google_section()` æ–°å¢ `_add_gb_section()`
- æ–°æŒ‰é’®ç›´æ¥ç»‘å®š `self.start_task("gb_xxx")`

ï¼ˆæ³¨æ„ï¼šGUI æ”¹åŠ¨åº”åªåšå…¥å£å’Œå‚æ•°é‡‡é›†ï¼Œä¸è¦æŠŠä¸šåŠ¡é€»è¾‘å†™è¿›æ¥ã€‚ï¼‰

### 7.3 åœ¨ GeekWorkerThread ä¸­å¢åŠ  task_type åˆ†æ”¯

åœ¨ `2dev/geek/geek_main_gui.py` çš„ `GeekWorkerThread.run()`ï¼š

```python
if self.task_type == "gb_xxx":
    # å–è´¦å·/ä»£ç†ç­‰æ•°æ®
    ok, msg = proc.run_gb_xxx(acc, proxy_str=proxy_str, log_callback=log_cb)
    return email, ok, msg
```

å¹¶å‘è§„åˆ™ï¼š
- å¤ç”¨ç°æœ‰ `ThreadPoolExecutor` å¹¶å‘æ¨¡å‹å³å¯ã€‚
- éœ€è¦åºåˆ—åŒ–èµ„æºï¼ˆä¾‹å¦‚åŒä¸€å¼ å¡ä¸èƒ½å¹¶å‘ï¼‰æ—¶ï¼Œåœ¨æµç¨‹å±‚åšé”/é˜Ÿåˆ—ã€‚

### 7.4 æœ€å°åŒ–è¾“å‡ºçº¦å®šï¼ˆæ–°ä¸“åŒºä¹Ÿè¦å†™æ¸…æ¥šï¼‰

å»ºè®®æ¯ä¸ªæ–° task éƒ½å†™ä¸€ä¸ªâ€œå°å¥‘çº¦â€ï¼Œè‡³å°‘åŒ…å«ï¼š
- è¾“å…¥ï¼šç”¨åˆ°å“ªäº›æ–‡ä»¶/å­—æ®µï¼ˆaccounts/proxies/cards/api keyï¼‰
- è¾“å‡ºï¼šä¼šå†™å“ªäº› DB/statusï¼›ä¼šå†™å“ªäº› txt
- æˆåŠŸ/å¤±è´¥åˆ¤å®šï¼šè¿”å›å€¼å«ä¹‰ï¼ˆ`(ok: bool, msg: str)`ï¼‰

---

## 8. å¸¸è§å‘

- æ§åˆ¶ç«¯å£ä¸é€šï¼šå…ˆç”¨ `GET /health` ç¡®è®¤ GeekezBrowser æ˜¯å¦ç”¨ `--control-port` å¯åŠ¨ã€‚
- Playwright è¿æ¥å¤±è´¥ï¼šç¡®è®¤ `settings.json` çš„ `enableRemoteDebugging=true`ï¼›ä»¥åŠ `/profiles/{id}/launch` è¿”å›çš„ `debugPort/wsEndpoint` æ˜¯å¦æ­£ç¡®ã€‚
- æ—¥å¿—çœ‹ä¸åˆ°ï¼šGUI çš„ stdout/stderr capture æ˜¯åœ¨ worker thread å†…å®Œæˆçš„ï¼Œä¸šåŠ¡é€»è¾‘å¦‚æœå¼€äº†æ–°çº¿ç¨‹ï¼Œéœ€è¦æ³¨æ„çº¿ç¨‹ä¸Šä¸‹æ–‡ï¼ˆå½“å‰å®ç°ç”¨ thread-local email æ ‡æ³¨æ—¥å¿—ï¼‰ã€‚

---

## 9. æ–‡ä»¶æ¸…å•ï¼ˆ2dev/geek/ï¼‰

| æ–‡ä»¶ | ç”¨é€” | ç±»å‹ |
|------|------|------|
| `geek_main_gui.py` | På·¥å…·ç®±ä¸»ç•Œé¢ | GUI |
| `geek_process.py` | æµç¨‹ç¼–æ’å±‚ï¼ˆæ ¸å¿ƒï¼‰ | æ ¸å¿ƒ |
| `geek_browser_api.py` | GeekezBrowser æ§åˆ¶ç«¯å£ API | æ ¸å¿ƒ |
| `geek_security.py` | å®‰å…¨è®¾ç½®è‡ªåŠ¨åŒ–ï¼ˆ2FA/é‚®ç®±/å¤‡ä»½ç ï¼‰ | åŠŸèƒ½æ¨¡å— |
| `geek_security_gui.py` | å®‰å…¨è®¾ç½® GUI çª—å£ | GUI |
| `geek_gui.py` | æ—§ç‰ˆç®€æ˜“ GUIï¼ˆå¯é€‰ï¼‰ | GUI |
| `geek_template.py` | è¿æ¥æ–¹å¼ç¤ºä¾‹ï¼ˆå‚è€ƒç”¨ï¼‰ | ç¤ºä¾‹ |
| `auto-goo-login.py` | å†å²è„šæœ¬ï¼ˆå‚è€ƒç”¨ï¼‰ | å†å² |
| `å¼€å‘è€…æŒ‡å—.md` | æœ¬æ–‡æ¡£ | æ–‡æ¡£ |

---

## 10. è¾“å‡ºæ–‡ä»¶çº¦å®š

| æ–‡ä»¶ | å†™å…¥æ—¶æœº | æ ¼å¼ |
|------|----------|------|
| `sheerIDlink.txt` | SheerLink è·å–æˆåŠŸ | æ¯è¡Œä¸€ä¸ªé“¾æ¥ |
| `å·²éªŒè¯æœªç»‘å¡.txt` | å­¦ç”Ÿèº«ä»½å·²éªŒè¯ï¼Œå¾…ç»‘å¡ | è´¦å·è¡Œæ ¼å¼ |
| `å·²ç»‘å¡å·.txt` | è®¢é˜…æˆåŠŸ | è´¦å·è¡Œæ ¼å¼ |
| `æ— èµ„æ ¼å·.txt` | æ— å­¦ç”Ÿèµ„æ ¼ | è´¦å·è¡Œæ ¼å¼ |
| `è¶…æ—¶æˆ–å…¶ä»–é”™è¯¯.txt` | æ“ä½œå¤±è´¥ | è´¦å·è¡Œæ ¼å¼ |
| `2dev/new_2fa_secrets.txt` | ä¿®æ”¹ 2FA æˆåŠŸ | `email----password----backup_email----new_secret` |
| `2dev/backup_codes.txt` | è·å–å¤‡ä»½ç æˆåŠŸ | `email: code1,code2,...` |
| `screenshots/*.png` | è®¢é˜…éªŒè¯æˆªå›¾ | `{email}_{status}_{timestamp}.png` |

---

## 11. task_type å®Œæ•´åˆ—è¡¨

| task_type | æ–¹æ³• | è¯´æ˜ |
|-----------|------|------|
| `start_app` | `AppLauncher.start()` | å¯åŠ¨ GeekezBrowser |
| `ensure_profiles` | `GeekProcess.ensure_profiles()` | åˆ›å»º/æ›´æ–°ç¯å¢ƒ |
| `launch` | `GeekProcess.launch_by_email()` | å¯åŠ¨æµè§ˆå™¨ |
| `close` | `GeekProcess.close_by_email()` | å…³é—­æµè§ˆå™¨ |
| `sheerlink` | `GeekProcess.run_sheerlink()` | è·å– SheerLink |
| `bind` | `GeekProcess.run_auto(api_key="")` | ä»…ç»‘å¡ |
| `auto` | `GeekProcess.run_auto()` | å…¨è‡ªåŠ¨ |
| `verify_subscription` | `GeekProcess.verify_subscription_status()` | éªŒè¯è®¢é˜…çŠ¶æ€ |
| `click_subscribe` | `GeekProcess.click_subscribe_button()` | ç‚¹å‡»è®¢é˜…æŒ‰é’® |
